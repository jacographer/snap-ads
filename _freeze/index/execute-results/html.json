{
  "hash": "f19db1c4c857554ddce2ff5376b0891d",
  "result": {
    "markdown": "---\ntitle: \"Snap Political Ads Analysis\"\nauthor:\n  - name: \"Jacob Saindon\" #splitting should work in new versions of Quarto\n    url: \"https://jacographer.com/\"\n    orcid: 0000-0002-3808-9704\n    affiliations:\n      - name: \"University of Kentucky\"\ncitation:\n  url: \"https://jacographer.com/\"\nknitr:\n  opts_chunk: \n    message: false\n    warning: false\n    fig-height: 5\n    fig-width: 8\n    fig-align: center\n    cap-location: margin\nexecute:\n  freeze: auto  #re-render only when source changes\nformat:\n  html:\n    theme: \n      - flatly\n      - custom.scss\n    toc: true\n    toc-depth: 2\n    toc-location: left #'body' goes into the top of doc\n    toc-title: \"Sections\"\n    title-block-banner: true\n    #title-block-style: plain\n    backgroundcolor: \"AntiqueWhite\"\n    fontcolor: \"Black\"\n    mainfont: 'Helvetica'\n  #docx: default\n  #pdf: default\n    #toc: true\n#pdf-engine: pdflatex #necessary for this R server.\n---\n\n\n## Project Description\n\nThis project works with data from [Snap's Political Ads Library](#0). Specifically, it pulls in the political advertising campaigns from 2020. This year was chosen because of the U.S. presidential election which occurred in November. In this analysis, I restrict the analysis to *only* U.S.-based advertisements which targeted particular states. The goal is to hone in on particular patterns of targeting across both **time** and **target audience**.\n\n\n\n\n\n## Data\n\n\n::: {.cell .caption-margin}\n\n```{.r .cell-code}\nsnap <- read_csv(\"data/snap_political_20.csv\")\n```\n:::\n\n\n## Tidying\n\nTo prepare the data, I restrict the country code to `united states` and drop entries which do not specify target audiences (`Interests`) and do not target states specifically (`Regions (Included)`). I then split and unnest the states targeted, convert the starting date to a `lubridate` month, and split and unnest the interests targeted.\n\n\n::: {.cell .caption-margin}\n\n```{.r .cell-code}\nsnap |>\n  filter(\n    CountryCode == \"united states\",\n    !is.na(Interests),\n    !is.na(`Regions (Included)`)\n  ) |>\n  mutate(\n    STATE_INC = str_split(`Regions (Included)`, \",\")\n    ) |>\n  unnest(cols = STATE_INC) -> snap_states\n\nsnap_states |>\n  mutate(\n    S_MONTH = month(StartDate, label = TRUE, abbr = TRUE)) -> snap_sm\n\nsnap_sm |>\n  mutate(\n    TARGET = str_split(`Interests`, \",\")\n    ) |>\n    unnest(cols = TARGET) -> snap_unnested\n```\n:::\n\n\nI then summarise the date to count the number of campaigns per state per month which target a particular target audience. Each of these rows is given an id.\n\n\n::: {.cell .caption-margin}\n\n```{.r .cell-code}\nsnap_unnested |>\n  summarise(\n      .by = c(STATE_INC,TARGET,S_MONTH),\n      TOTAL = n()) |>\n  mutate(\n    id = row_number()) -> snap_tidy\n\nsnap_tidy\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2,065 × 5\n   STATE_INC  TARGET                                S_MONTH TOTAL    id\n   <chr>      <chr>                                 <ord>   <int> <int>\n 1 California Advocates & Activists                 Sep        20     1\n 2 California Bookworms & Avid Readers              Sep        20     2\n 3 California Collegiates                           Sep        20     3\n 4 California Investors & Entrepreneurs             Sep        20     4\n 5 California Money Minders                         Sep        20     5\n 6 California News Watchers                         Sep        20     6\n 7 California Philanthropists                       Sep        20     7\n 8 California TV Network Viewers (CNN)              Sep        20     8\n 9 California TV Network Viewers (FOX News Channel) Sep        20     9\n10 California TV Network Viewers (MSNBC)            Sep        20    10\n# ℹ 2,055 more rows\n```\n:::\n:::\n\n\n## Data Summaries\n\nWorking with the tidied dataset, however, can be misleading. Unnesting the states and interests can lead to an inflated counts of total ads. In the following summaries, I use only the unnested states data to count the number of campaigns in which a state was targeted. These counts are not mutually exclusive; that is, North Carolina and Arizona may both be included as in a single campaign's targeting parameters. However, this summary still provides a useful yardstick to determine relative importance of states.\n\nFirst, the count of a state's inclusion in targeting parameters.\n\n\n::: {.cell .caption-margin}\n\n```{.r .cell-code}\nsnap_sm |>\n  group_by(STATE_INC) |>\n  summarise(\n    COUNT = n()) |>\n  arrange(-COUNT) -> state_count\n\nstate_count\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 51 × 2\n   STATE_INC      COUNT\n   <chr>          <int>\n 1 North Carolina   182\n 2 Arizona          145\n 3 Georgia          138\n 4 Florida          121\n 5 Michigan         118\n 6 Pennsylvania     116\n 7 Wisconsin         93\n 8 Virginia          70\n 9 Maine             69\n10 Iowa              66\n# ℹ 41 more rows\n```\n:::\n:::\n\n\nSecond, the count of a state's inclusion in targeting parameters, per month.\n\n\n::: {.cell .caption-margin}\n\n```{.r .cell-code}\nsnap_sm |>\n  group_by(STATE_INC, S_MONTH)|>\n  summarise(\n    COUNT = n()) |>\n  arrange(-COUNT) -> sm_count\n\nsm_count\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 297 × 3\n# Groups:   STATE_INC [51]\n   STATE_INC      S_MONTH COUNT\n   <chr>          <ord>   <int>\n 1 North Carolina Sep        70\n 2 Arizona        Oct        41\n 3 Michigan       Sep        38\n 4 Pennsylvania   Sep        37\n 5 North Carolina Oct        36\n 6 Georgia        Nov        35\n 7 Wisconsin      Oct        30\n 8 Florida        Oct        29\n 9 Arizona        Aug        28\n10 Georgia        Dec        25\n# ℹ 287 more rows\n```\n:::\n:::\n\n\n...and visualized (very roughly).\n\n\n::: {.cell .caption-margin}\n\n```{.r .cell-code}\nsm_count |>\nggplot(aes(S_MONTH, COUNT))+\n  geom_col()+\n  theme(text = element_text(size = 12))+\n  facet_wrap(~STATE_INC)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\nTurning back to the tidied data, which includes states and audiences unnested, the following shows the total count of audience interests targeted in a particular state, in a particular month. The volume and variety of targeting parameters are quite high:\n\n\n::: {.cell .caption-margin}\n\n```{.r .cell-code}\nsnap_tidy |>\n  group_by(STATE_INC, S_MONTH) |>\n  summarise(TOTAL = sum(TOTAL)) |>\n  arrange(-TOTAL) -> sm_sum\n\nsm_sum\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 297 × 3\n# Groups:   STATE_INC [51]\n   STATE_INC      S_MONTH TOTAL\n   <chr>          <ord>   <int>\n 1 Arizona        Oct       736\n 2 Pennsylvania   Sep       434\n 3 Wisconsin      Oct       386\n 4 Michigan       Sep       380\n 5 Florida        Mar       258\n 6 Florida        Feb       237\n 7 Arizona        Sep       231\n 8 North Carolina Oct       218\n 9 California     Sep       204\n10 Georgia        Nov       159\n# ℹ 287 more rows\n```\n:::\n:::\n\n\nBelow, I aggregate based on audience interest per month. We can see that \"Political News Watchers\", \"Green Living Enthusiasts\", \"Bookworms & Avid Readers\", and \"Outdoor & Nature Enthusiasts\" were the most included this month:\n\n\n::: {.cell .caption-margin}\n\n```{.r .cell-code}\nsnap_tidy |>\n  group_by(TARGET, S_MONTH) |>\n  summarise(\n    SUM = sum(TOTAL)) |>\n  arrange(-SUM) -> tm_sum\n\ntm_sum\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 451 × 3\n# Groups:   TARGET [189]\n   TARGET                       S_MONTH   SUM\n   <chr>                        <ord>   <int>\n 1 Political News Watchers      Feb       420\n 2 Green Living Enthusiasts     Feb       414\n 3 Bookworms & Avid Readers     Feb       408\n 4 Outdoor & Nature Enthusiasts Feb       408\n 5 Political News Watchers      Aug       293\n 6 Advocates & Activists        Apr       176\n 7 Political News Watchers      Apr       176\n 8 Political News Watchers      Jul       151\n 9 Advocates & Activists        Jul       150\n10 TV Network Viewers (CNN)     Jul       143\n# ℹ 441 more rows\n```\n:::\n:::\n\n\nAnd here, I aggregate based on audience interest per state. We can see that \"Political News Watchers\" and \"Advocates & Activists\" were the most-included in Arizona over the year.\n\n\n::: {.cell .caption-margin}\n\n```{.r .cell-code}\nsnap_tidy |>\n  group_by(TARGET, STATE_INC) |>\n  summarise(\n    SUM = sum(TOTAL)) |>\n  arrange(-SUM) -> ts_sum\n\nts_sum\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1,336 × 3\n# Groups:   TARGET [189]\n   TARGET                  STATE_INC        SUM\n   <chr>                   <chr>          <int>\n 1 Political News Watchers Arizona           71\n 2 Advocates & Activists   Arizona           66\n 3 Political News Watchers Pennsylvania      63\n 4 Political News Watchers Michigan          61\n 5 Political News Watchers North Carolina    61\n 6 Political News Watchers Georgia           60\n 7 Advocates & Activists   Michigan          59\n 8 Advocates & Activists   North Carolina    57\n 9 Political News Watchers Maine             57\n10 Advocates & Activists   Georgia           55\n# ℹ 1,326 more rows\n```\n:::\n:::\n\n\nFinally, I take the tidied data and cull the top interests per state per month to create the `max_list` and `top_ads` datasets; the former maintains a 'tidy' format, whereas the latter nests the top interests into a column of tables such that each state and month has a single row.\n\n\n::: {.cell .caption-margin}\n\n```{.r .cell-code}\nsnap_tidy |>\n  slice_max(TOTAL, by = c(STATE_INC, S_MONTH)) -> max_list\n\nmax_list |>\n  group_by(STATE_INC, S_MONTH) |>\n  subset(select = c(STATE_INC, S_MONTH, TARGET)) |>\n    nest(.key = \"TOP_TARGET\") |>\n  arrange(S_MONTH, STATE_INC) -> top_snap\n\ntop_ads <- left_join(sm_count, top_snap)\n```\n:::\n\n\n## Plotting\n\n### Top Interests by State and Month\n\nIn the following chart, I attempt to plot the diversity of top ads per month per state. I restrict the output to the top 10 states (in terms of volume of campaign targeting inclusions) in an attempt to make the chart more readable. Because of the number of top audiences, the output ends up being less useful as a tool to determine top interests targeted per state and more useful to get a sense of which states had the highest *volume* and *variety* of interests targeted. For example, in September of 2020, Pennsylvania saw a huge volume of interests launch, though with relatively little diversity. By contrast, in January Virginia saw a slightly-smaller but still large volume of ads launch across a variety of interest parameters.\n\n\n::: {.cell .caption-margin}\n\n```{.r .cell-code}\nmax_list |>\n  filter(STATE_INC == \"North Carolina\" | STATE_INC == \"Arizona\" | STATE_INC == \"Georgia\" | STATE_INC == \"Florida\" | STATE_INC == \"Michigan\" | STATE_INC == \"Pennsylvania\" | STATE_INC == \"Wisconsin\" | STATE_INC == \"Virginia\" | STATE_INC == \"Maine\" | STATE_INC == \"Iowa\") |>\n  ggplot(aes(TOTAL, S_MONTH, fill = TARGET))+\n  geom_col()+\n  labs(title = \"Top Snapchat ad audiences targeted, per Top-10 state\",x = \"Number of audiences targeted\",y = \"Month\")+\n  scale_y_discrete(limits = rev)+\n  facet_wrap(~STATE_INC)+\n  theme_bw()+\n  theme(rect = element_rect(fill = \"antiquewhite\"), legend.position=\"bottom\", text = element_text(size = 12))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\nIn the chart below, we can see the total number of campaigns launched in each of these top-10 states. Compare with the chart above. North Carolina, for example, saw many ads launch in September and October, but relatively few audiences were targeted. This indicates that a highly-specific demographic became very important to reach.\n\n\n::: {.cell .caption-margin}\n\n```{.r .cell-code}\ntop_ads |>\n  filter(STATE_INC == \"North Carolina\" | STATE_INC == \"Arizona\" | STATE_INC == \"Georgia\" | STATE_INC == \"Florida\" | STATE_INC == \"Michigan\" | STATE_INC == \"Pennsylvania\" | STATE_INC == \"Wisconsin\" | STATE_INC == \"Virginia\" | STATE_INC == \"Maine\" | STATE_INC == \"Iowa\") |>\n  ggplot(aes(COUNT, S_MONTH, fill = STATE_INC))+\n  geom_col()+\n  labs(title = \"Snapchat ad campaigns per Top-10 state\",x = \"Number of ads\",y = \"Month\")+\n  scale_y_discrete(limits = rev)+\n  theme_bw()+\n  theme(\n    rect = element_rect(fill = \"antiquewhite\"),\n    legend.position=\"none\",\n    text = element_text(size = 12))+\n  facet_wrap(~STATE_INC)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\nBelow, I break out two categories of interest audiences. First, I show the total count of which target TV news viewers by month, colored by the specific targeting parameter.\n\n\n::: {.cell .caption-margin}\n\n```{.r .cell-code}\ntm_sum |>\n  filter(TARGET == \"Political News Watchers\" | TARGET == \"TV Viewers (News)\" | TARGET == \"TV Network Viewers (CNN)\" | TARGET == \"TV Network Viewers (MSNBC)\" | TARGET == \t\"TV Network Viewers (NBC)\" | TARGET == \"TV Network Viewers (FOX News Channel)\" | TARGET == \"TV Network Viewers (ABC)\") |>\n  ggplot(aes(S_MONTH, SUM, fill = TARGET))+\n  geom_col()+\n  scale_y_continuous(limits = c(0,600))+\n  labs(title = \"Snapchat ad campaigns month targeting TV news viewers\",x = \"Number of ads\",y = \"Month\", fill = \"Target Audience\")+\n  theme_bw()+\n  theme(rect = element_rect(fill = \"antiquewhite\"), text = element_text(size = 12))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\nSecond, I show the total count of ads targeting non-news TV viewers by month, colored by targeting parameter.\n\n\n::: {.cell .caption-margin}\n\n```{.r .cell-code}\ntm_sum |>\n  filter(TARGET == \"TV Network Viewers (BET)\" | TARGET == \"TV Network Viewers (VH1)\" | TARGET == \"TV Viewers (Reality TV)\" | TARGET == \"TV Network Viewers (The CW)\" | TARGET == \"TV Network Viewers (E!)\" | TARGET == \"TV Network Viewers (MTV)\" | TARGET == \"TV Network Viewers (Comedy Central)\" | TARGET == \"TV Network Viewers (Viceland)\" | TARGET == \"TV Network Viewers (Starz)\" | TARGET == \"TV Network Viewers (FX)\" | TARGET == \"TV Network Viewers (ESPN)\") |>\n  ggplot(aes(S_MONTH, SUM, fill = TARGET))+\n  scale_x_discrete(drop=FALSE)+\n  scale_y_continuous(limits = c(0,600))+\n  geom_col()+\n  labs(title = \"Snapchat ad campaigns month targeting TV entertainment channels\",x = \"Number of ads\",y = \"Month\", fill = \"Target Audience\")+\n  theme_bw()+\n  theme(rect = element_rect(fill = \"antiquewhite\"), text = element_text(size = 12))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\nComparing these charts, we see an interesting contrast. Whereas ads targeting audiences who may be more obviously politically engaged (news viewers) do appear in much higher volumes throughout the year, those targeting less-obviously engaged audiences (entertainment viewers) jump in the months immediately preceding the election in November. It's also likely that these audiences are associated with the same campaigns and/or states. This appears to indicate the rise of more narrow audience targeting immediately prior to the election.\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}